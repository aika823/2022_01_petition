{% extends "base.html" %}

{% block content %}

<!-- section.write -->
<section class="write template">
  <div class="form-header">
    <a href="javascript:void(0)" onclick="location.href='./check.html'"><i class="fas fa-times"></i></a>
    <h3>{{petition.title}}</h3>
  </div>

  <div id="thumbnailImage" class="form-row form-row--image"
    style="background-image:url('/media/{{petition.thumbnail}}');">
  </div>

  <div class="title-wrap">
    <h2 class="write-title">{{title}}</h2>
    <div class="category-tag">
      <div class="tag">
        <p>카테고리</p>
        {% for category in category_list %}
        <p class="category">{{category.category.name}}</p>
        {% endfor %}
      </div>
      <div class="tag">
        <p>희망 수신자</p>
        <p class="receiver">{{petition.department.name}}</p>
      </div>
    </div>

    <a href="javascript:void(0)" class="open-modal">
      <i class="fas fa-ellipsis-v"></i>
    </a>
  </div>

  <div class="line"></div>

  <div class="template-form-item">
    
    {% if petition.content %}
    <p class="item-content">{{petition.content}}</p>
    {% endif %}

    {% if petition.content_1 %}
    <p class="item-content">{{petition.content_1}}</p>
    {% endif %}

    {% if petition.content_2 %}
    <p class="item-content">{{petition.content_2}}</p>
    {% endif %}

    {% if petition.content_3 %}
    <p class="item-content">{{petition.content_3}}</p>
    {% endif %}

    {% if petition.content_4 %}
    <p class="item-content">{{petition.content_4}}</p>
    {% endif %}

    {% if petition.content_5 %}
    <p class="item-content">{{petition.content_5}}</p>
    {% endif %}

    {% if petition.content_6 %}
    <p class="item-content">{{petition.content_7}}</p>
    {% endif %}

    {% if petition.content_7 %}
    <p class="item-content">{{petition.content_7}}</p>
    {% endif %}

  </div>

  <div class="template-form-item">
    <div id="preview" class="image-wrap">
      {% for image in image_list %}
      <div class="uploaded-img" style="background-image: url('/media/{{image.image}}');"></div>
      {% endfor %}
    </div>
  </div>

  <div class="template-form-item">
    <div class="tag-keywords">
      <p class="keyword done"># <span>{{petition.keyword_1}}</span></p>
      <p class="keyword done"># <span>{{petition.keyword_2}}</span></p>
      <p class="keyword done"># <span>{{petition.keyword_3}}</span></p>
    </div>
  </div>

  <div class="inspection-box bad report">
    <div class="result-text">
      <div class="status"><i class="fas fa-exclamation"></i></div>
      <p>신고</p>
    </div>
    <div class="image-wrap">
      <img src="/static/images/alarm.png" alt="">
    </div>
    <h3 class="mention"><span>부적절한 글</span>인가요?</h3>
    <div class="box-bottom box-bottom--grid">
      <a class="btn-apply done" href="javascript:void(0)">네</a>
      <a class="btn-apply done" href="javascript:void(0)">아니요</a>
    </div>
    <p class="btn-close"><i class="fas fa-times"></i></p>
  </div>

</section>
{% endblock content %}


{% block extrascripts %}
<script>
  $('.open-modal').click(function () {
    $('.inspection-box').fadeIn(300);
  });

  $('.btn-close').click(function () {
    $('.inspection-box').fadeOut(300);
  });

  $('.done').click(function () {
    $('.inspection-box').fadeOut(300);
  });
</script>


<script>
  $body = $('body');
  $modalWrap = $('.modal_wrap');

  $('.btn-submit').on('click', function () {
    $body.addClass('modal_in');
    $modalWrap.fadeIn(300);
    $body.css('padding-right', getScrollWidth());
  });

  $('.close_btn, .modal_dim').on('click', function () {
    var speed = 300;
    $modalWrap.fadeOut(speed);
    setTimeout(function () {
      $body.removeClass('modal_in');
      $body.css('padding-right', 0)
    }, speed)
  });

  function getScrollWidth() {
    var body = document.querySelector('body');
    var scrollDiv = document.createElement('div');
    scrollDiv.className = 'fake_sjwidth';
    body.appendChild(scrollDiv);
    var scrollbarWidth = $(document).height() > $(window).height() ? scrollDiv.offsetWidth - scrollDiv.clientWidth :
      0;

    body.removeChild(scrollDiv);
    return scrollbarWidth;
  }
</script>
{% endblock extrascripts %}